<!DOCTYPE html>
<html lang="en">
  <!--
    Hey, isn't this the best intended source you've ever seen?
    And it's HTML5 - so it must be awesome.
  -->
  <head>
    <meta charset="utf-8">
    <meta content="Enhance your textarea or input fields with the HTML5 attribute “placeholder” and make it work in all Browsers with jQuery." name="description">
    <meta content="html5,placeholder,jquery,input,textarea,browser,fix" name="keywords">
    <meta content="2010-04-26" name="date">
    <title>HTML5 Placeholder Input Fields Fixed with jQuery</title>
    <link href="../hagenburger.rss" rel="alternate" type="application/rss+xml">
    <link href="../stylesheets/hagenburger.css?4" rel="stylesheet">
    <script src="../javascripts/hagenburger.js"></script>
  </head>
  <body>
    <div id="nico-hagenburger">
      <header>
        <a href="/" id="logo"><img alt="Nico Hagenburger — HTML5, placeholder, jQuery, input, textarea, browser, fix" src="../images/nico-hagenburger-ruby-on-rails.png"></a>
        <nav><a href="/">Home</a><a href="../BLOG.html">Blog</a><a href="../CONTACT.html">Contact</a><a href="../PORTFOLIO.html">Portfolio</a></nav>
        <div><strong>Hi, I’m Nico Hagenburger</strong><br>My pleasure is designing<br>clean, simple websites<br>and developing web applications in Ruby on Rails.</div>
      </header>
      <div id="content">
        <article class="post">
          <h1>HTML5 Placeholder Input Fields Fixed with jQuery</h1>
          <p><a href="HTML5-with-CSS-for-Safari,-Firefox,-Opera-and-IE.html">HTML5</a> added some new features for <code>input</code> and <code>textarea</code> fields. One is inspired by Safari’s search box: <code>placeholder</code> This adds an default text if the textfield is empty:</p>
          <pre><code><b>&lt;<em>input</em></b> <b>type</b>=&quot;text&quot; <b>placeholder</b>=&quot;Fill me …&quot;<b>&gt;</b>&#x000A;</code></pre>
          <h2 id="jquery-fix-for-all-browsers">jQuery Fix for All Browsers</h2>
          <p>Currently the <em>placeholder</em> works with the latest <a href="http://webkit.org/">Webkit</a> (Safari nightly build) and Chrome only. In Safari 4.0 placeholders won’t appear in textareas. For all other browsers, the following short jQuery fix will help you. <code>$(&#39;[placeholder]&#39;)</code> selects all HTML elements with an placeholder attribute (textarea, input, and other elements).</p>
          <pre><code>$(<q>'[placeholder]'</q>).focus(<em>function</em>() {&#x000A;  <em>var</em> input = $(<em>this</em>);&#x000A;  <em>if</em> (input.val() == input.attr(<q>'placeholder'</q>)) {&#x000A;    input.val(<q>''</q>);&#x000A;    input.removeClass(<q>'placeholder'</q>);&#x000A;  }&#x000A;}).blur(<em>function</em>() {&#x000A;  <em>var</em> input = $(<em>this</em>);&#x000A;  <em>if</em> (input.val() == <q>''</q> || input.val() == input.attr(<q>'placeholder'</q>)) {&#x000A;    input.addClass(<q>'placeholder'</q>);&#x000A;    input.val(input.attr(<q>'placeholder'</q>));&#x000A;  }&#x000A;}).blur();&#x000A;</code></pre>
          <p>Don’t forget the last <code>blur()</code> call. This one initializes the fields.</p>
          <p><em>Update:</em> <a href="http://twitter.com/rmehner">Robin</a> mentioned in the comments, that this would post the <em>placeholder</em> values to the form action script. Of course, this isn’t what we want. By adding a pre-submit clearing this problem is solved:</p>
          <pre><code>$(<q>'[placeholder]'</q>).parents(<q>'form'</q>).submit(<em>function</em>() {&#x000A;  $(<em>this</em>).find(<q>'[placeholder]'</q>).each(<em>function</em>() {&#x000A;    <em>var</em> input = $(<em>this</em>);&#x000A;    <em>if</em> (input.val() == input.attr(<q>'placeholder'</q>)) {&#x000A;      input.val(<q>''</q>);&#x000A;    }&#x000A;  })&#x000A;});&#x000A;</code></pre>
          <p>You’ll find the whole <a href="http://gist.github.com/379601">code at github</a>.</p>
          <h2 id="css-styling">CSS Styling</h2>
          <p>While the placeholder is visible, the text field gets an additional <code>.placeholder</code> class. To make it look beautifully add a some CSS for a grey placeholder text:</p>
          <pre><code><b><i>.placeholder</i></b>&#x000A;{&#x000A;  <b>color:</b> #aaa;&#x000A;}&#x000A;</code></pre>
          <h2 id="result">Result</h2>
          <p>Here’s the result—it’s tested and works in Safari, Firefox, Opera, Chrome and even Internet Explorer:</p>
          <div class="result" id="with-jquery">
            <form>
              <p>Input field:</p>
              <fieldset>
                <input placeholder="Fill me …" type="text">
                <input placeholder="Fill me …" type="text" value="Already filled, clear to see placeholder">
              </fieldset>
              <p>Textarea:</p>
              <fieldset>
                <textarea placeholder="Start writing a book …"></textarea>
                <textarea placeholder="Start writing a book …">Already filled, clear to see placeholder</textarea>
              </fieldset>
            </form>
          </div>
          <h2 id="css-styling-of-the-html5-attribute-placeholder">CSS Styling of the HTML5 Attribute Placeholder</h2>
          <p>But there’s one more thing: Webkit users can even style their placeholder text. There’s an temporarily pseudo element selector called <code>-webkit-input-placeholder</code>:</p>
          <pre><code>::-webkit-input-placeholder&#x000A;{&#x000A;  <b>color:</b> <em>red</em>;&#x000A;  <b>font-weight:</b> <em>bold</em>;&#x000A;}&#x000A;</code></pre>
          <p>This one is pure <em>HTML5</em> and <em>CSS</em>. You should see bold red text for the placeholders (left side) and normal black text if there’s user input (right side). It works in Webkit and Chrome only and partially in Safari:</p>
          <div class="result" id="pure-html5">
            <form>
              <p>Input field:</p>
              <fieldset>
                <input placeholder="Fill me …" type="text">
                <input placeholder="Fill me …" type="text" value="Already filled, clear to see placeholder">
              </fieldset>
              <p>Textarea:</p>
              <fieldset>
                <textarea placeholder="Start writing a book …"></textarea>
                <textarea placeholder="Start writing a book …">Already filled, clear to see placeholder</textarea>
              </fieldset>
            </form>
          </div>
          <style type="text/css">
            .result input,
            .result textarea {
              border: 1px #61981a solid;
              font-weight: normal;
              float: left;
              padding: 2px;
              width: 199px; }
              .result input:first-child,
              .result textarea:first-child {
                margin-right: 10px; }
            
            .placeholder {
              color: #aaaaaa; }
            
            #pure-html5 ::-webkit-input-placeholder {
              color: red;
              font-weight: bold; }
          </style>
          <script type="text/javascript">
            //<![CDATA[
              $('#with-jquery [placeholder]').focus(function() {
                var input = $(this);
                if (input.val() == input.attr('placeholder')) {
                  input.val('');
                  input.removeClass('placeholder');
                }
              }).blur(function() {
                var input = $(this);
                if (input.val() == '') {
                  input.addClass('placeholder');
                  input.val(input.attr('placeholder'));
                }
              }).blur().parents('form').submit(function() {
                $(this).find('[placeholder]').each(function() {
                  var input = $(this);
                  if (input.val() == input.attr('placeholder')) {
                    input.val('');
                  }
                })
              });
            //]]>
          </script>
        </article>
        <div id="twitter">
          <a href="http://twitter.com/hagenburger">Follow me on twitter: @hagenburger</a>
        </div>
      </div>
    </div>
    <footer>
      <a href="http://github.com/hagenburger" id="github">
        <span>Fork me on GitHub!</span>
        <span>Get free lemonade!</span>
      </a>
      <small>© Nico Hagenburger/Hagenburger GmbH 2000—2010 · Blog posts published under CC share alike licence (except design and artwork or otherwise mentioned)</small>
    </footer>
  </body>
  <!--
    You've just read it till the end.
    If you're that fascinated, you definitaly have to hire me.
  -->
</html>
